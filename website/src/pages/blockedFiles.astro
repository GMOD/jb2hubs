---
import Layout from '../layouts/Layout.astro'
import Container from '../components/Container.astro'
import { readFile } from 'fs/promises'
import { join } from 'path'
import '../styles/common-table.css'

// Read blockedFiles.txt from project root
const blockedFilesPath = join(process.cwd(), 'blockedFiles.txt')
const content = await readFile(blockedFilesPath, 'utf-8')
const files = content
  .trim()
  .split('\n')
  .filter(line => line.trim())
---

<Layout>
  <Container>
    <h1>Blocked Files</h1>
    <p>Total blocked files: {files.length}</p>

    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>File Path</th>
        </tr>
      </thead>
      <tbody>
        {
          files.map((file, index) => (
            <tr key={index}>
              <td>{index + 1}</td>
              <td>{file}</td>
            </tr>
          ))
        }
      </tbody>
    </table>
  </Container>
</Layout>
