---
import Layout from '../layouts/Layout.astro'
import Container from '../components/Container.astro'
import { readFile } from 'fs/promises'
import { join } from 'path'
import '../styles/common-table.css'

// Read blockedFiles.txt from project root
const blockedFilesPath = join(process.cwd(), 'blockedFiles.txt')
const content = await readFile(blockedFilesPath, 'utf-8')
const files = content
  .trim()
  .split('\n')
  .filter(line => line.trim())
---

<Layout>
  <Container>
    <h3>Unavailable tracks</h3>
    <p>
      This is a list of files that are available at UCSC, but which we were not
      able to ping. See <a href="https://genome.ucsc.edu/license/">
        https://genome.ucsc.edu/license/
      </a> for more info. Most of these fall under this restriction category: "Certain
      genome annotation data, mostly on the human genome and in the domain of clinical
      genetics, have specific restrictions. For some of these, we are not allowed
      to make the data available. Usually the data must be obtained from the source
      database directly in the original format or licensed, rather from UCSC. Examples
      are HGMD, LOVD, OMIM, Decipher, Genomenon, Genehancer and COSMIC." These generally
      have re-sharing restrictions and are (currently) unavailable in JBrowse, though
      we may be able to load them. Please get in touch if you are interested in seeing
      them
    </p>

    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>File Path</th>
        </tr>
      </thead>
      <tbody>
        {
          files.map((file, index) => (
            <tr key={index}>
              <td>{index + 1}</td>
              <td>{file}</td>
            </tr>
          ))
        }
      </tbody>
    </table>
  </Container>
</Layout>
