---
import Layout from '../../layouts/Layout.astro';
import Container2 from '../../components/Container2.astro';
import DataTable from '../../components/DataTable.jsx';

const allHubs = await Astro.glob('../../../../website/processedHubJson/*.json');

export async function getStaticPaths() {
  return allHubs.map((file) => {
    const slug = file.file.split('/').pop().replace('.json', '');
    return { params: { slug }, props: { rows: file.default } };
  });
}

const { slug } = Astro.params;
const { rows } = Astro.props;

const title = slug.charAt(0).toUpperCase() + slug.slice(1);
---

<Layout>
  <Container2>
    <h1>GenArk hubs - {title}</h1>
    <DataTable rows={rows} client:load />
  </Container2>
</Layout>